--- Testing mag_rtn_4sa caching performance (BASELINE) ---
=== Mag First run ===

üîç [PLOTBOT_ENTRY] plotbot() called with 2 arguments:
  [PLOTBOT_ENTRY] arg0: mag_rtn_4sa.br (ID:14758646992) ‚Üí axis 1
ü§ñ Plotbot starting (loading scientific libraries)...
ü§ñ Plotbot libraries loaded, proceeding...
üîç [PLOTBOT_BUILD_REQUESTS] Adding to plot_requests: mag_rtn_4sa.br (ID:14758646992)
üõ∞Ô∏è mag_RTN_4sa - acquiring variables: br
[CUBBY] 
=== Retrieving mag_rtn_4sa from data_cubby ===
[CUBBY] GRAB CALLER: /Users/robertalexander/GitHub/Plotbot/plotbot/plotbot_main.py:311
[CUBBY] GRAB SUCCESS - Retrieved mag_rtn_4sa with type <class 'plotbot.data_classes.psp_mag_rtn_4sa.mag_rtn_4sa_class'>
[CUBBY] [CUBBY_GRAB_RETURN_STATE] Object ID 14829304576 for key 'mag_rtn_4sa'. dt_len: 1186504, min: 2020-01-28T00:00:00.074993408, max: 2020-01-30T23:59:59.943748864
[CUBBY] GRAB OUTPUT - datetime_array type=ndarray, elem_type=datetime64, shape=(1186504,), range=2020-01-28T00:00:00.074993 to 2020-01-30T23:59:59.943748
[CUBBY] GRAB OUTPUT - raw_data keys=['bmag', 'pmag', 'bn', 'br', 'bt', 'all'] | bmag: type=ndarray, shape=(1186504,) | pmag: type=ndarray, shape=(1186504,) | bn: type=ndarray, shape=(1186504,) | br: type=ndarray, shape=(1186504,) | bt: type=ndarray, shape=(1186504,) | all(list): len=3, elem_shape=(1186504,)
[CUBBY] === End Retrieval Debug (LEAVING DATA CUBBY)===

üîß [GET_SUBCLASS] Attempting to get mag_rtn_4sa.br for instance ID:14829304576
üîß [GET_SUBCLASS] Found 'br' as attribute. Type:plot_manager, ID:14844806224
üîß [GET_SUBCLASS] Returning: mag_rtn_4sa.br
Added variable: mag_rtn_4sa.br (ID:14844806224)
Total variables to load: 1
 
üì• Acquiring data for 1 variables...
üïí TimeRangeTracker: Stored trange ['2021-11-20/00:00:00.000', '2021-11-23/00:00:00.000']
[GET_DATA_ENTRY] Original trange: ['2021-11-20/00:00:00.000', '2021-11-23/00:00:00.000'], variables: ['[-106.73324  -106.5377   -106.12085  ... -110.33162  -110.26645\n -110.155815]']
[GET_DATA_ENTRY] Instance mag_RTN_4sa (ID: 14844806224) passed in. Len: 395491, Min: 2020-01-30T00:00:00.076356608, Max: 2020-01-30T23:59:59.943748864
[GET_DATA PRE-LOOP] required_data_types set: {'mag_RTN_4sa'}
üõ∞Ô∏è mag_RTN_4sa - acquiring variables: br
üìã Required data types: {'mag_RTN_4sa'}
[GET_DATA IN-LOOP] Current data_type from set: 'mag_RTN_4sa' (Type: <class 'str'>)
Processing Data Type: mag_RTN_4sa...
üîÑ Processing: mag_RTN_4sa
[GET_DATA_CONFIG_CHECK] Attempting to get config for data_type FROM LOOP VAR: 'mag_RTN_4sa'
[GET_DATA_CONFIG_CHECK] Available keys in psp_data_types: ['mag_RTN', 'mag_RTN_4sa', 'mag_SC', 'mag_SC_4sa', 'sqtn_rfs_v1v2', 'spe_sf0_pad', 'spe_af0_pad', 'spi_sf00_l3_mom', 'spi_sf00_8dx32ex8a', 'spi_af00_L3_mom', 'spi_sf0a_l3_mom', 'dfb_ac_spec_dv12hg', 'dfb_ac_spec_dv34hg', 'dfb_dc_spec_dv12hg', 'sf00_fits', 'sf01_fits', 'ham', 'psp_br_norm_calculated', 'psp_orbit_data', 'psp_span_vdf', 'wind_mfi_h2', 'wind_swe_h1', 'wind_swe_h5', 'wind_3dp_pm', 'wind_3dp_elpd', 'psp_waves_auto', 'demo_spectral_waves', 'demo_wave_power', 'psp_waves_real_test', 'psp_simple_test', 'psp_spectral_waves', 'psp_waves_test', 'psp_wavepower']
[CUBBY] 
=== Retrieving mag_rtn_4sa from data_cubby ===
[CUBBY] GRAB CALLER: /Users/robertalexander/GitHub/Plotbot/plotbot/get_data.py:425
[CUBBY] GRAB SUCCESS - Retrieved mag_rtn_4sa with type <class 'plotbot.data_classes.psp_mag_rtn_4sa.mag_rtn_4sa_class'>
[CUBBY] [CUBBY_GRAB_RETURN_STATE] Object ID 14829304576 for key 'mag_rtn_4sa'. dt_len: 1186504, min: 2020-01-28T00:00:00.074993408, max: 2020-01-30T23:59:59.943748864
[CUBBY] GRAB OUTPUT - datetime_array type=ndarray, elem_type=datetime64, shape=(1186504,), range=2020-01-28T00:00:00.074993 to 2020-01-30T23:59:59.943748
[CUBBY] GRAB OUTPUT - raw_data keys=['bmag', 'pmag', 'bn', 'br', 'bt', 'all'] | bmag: type=ndarray, shape=(1186504,) | pmag: type=ndarray, shape=(1186504,) | bn: type=ndarray, shape=(1186504,) | br: type=ndarray, shape=(1186504,) | bt: type=ndarray, shape=(1186504,) | all(list): len=3, elem_shape=(1186504,)
[CUBBY] === End Retrieval Debug (LEAVING DATA CUBBY)===

Tracker indicates calculation needed for mag_RTN_4sa (using original type mag_RTN_4sa). Proceeding with download if applicable...
Server mode for mag_RTN_4sa: berkeley
Attempting Berkeley acquisition path for mag_RTN_4sa...
üì° mag_RTN_4sa - Local .cdf files already exist:
üìÇ /Users/robertalexander/GitHub/Plotbot/data/psp/fields/l2/mag_rtn_4_per_cycle/2021/psp_fld_l2_mag_RTN_4_Sa_per_Cyc_20211120_v02.cdf, /Users/robertalexander/GitHub/Plotbot/data/psp/fields/l2/mag_rtn_4_per_cycle/2021/psp_fld_l2_mag_RTN_4_Sa_per_Cyc_20211121_v02.cdf, /Users/robertalexander/GitHub/Plotbot/data/psp/fields/l2/mag_rtn_4_per_cycle/2021/psp_fld_l2_mag_RTN_4_Sa_per_Cyc_20211122_v02.cdf
mag_RTN_4sa - Import/Refresh required
‚òëÔ∏è - CDF Data import complete for mag_RTN_4sa range ['2021-11-20/00:00:00', '2021-11-23/00:00:00'].

[CUBBY]     data_object ID: 13084583488
[CUBBY]     DataObject.times length: 1186519, dtype: int64
[CUBBY]     data_object.data ID: 13043875456
[CUBBY]     DataObject.data keys: ['psp_fld_l2_mag_RTN_4_Sa_per_Cyc']
[CUBBY]         'psp_fld_l2_mag_RTN_4_Sa_per_Cyc' is PRESENT. Type: <class 'numpy.ndarray'>, Shape: (1186519, 3), Len: 1186519
üì• Requesting DataCubby to update/merge global instance for mag_rtn_4sa...
[GET_DATA PRE-CUBBY CALL] Passing to DataCubby: cubby_key='mag_rtn_4sa', original_requested_trange='['2021-11-20/00:00:00.000', '2021-11-23/00:00:00.000']', type(original_requested_trange[0])='<class 'str'>'
[CUBBY_UPDATE_ENTRY] Received call for 'mag_rtn_4sa'. Original trange: '['2021-11-20/00:00:00.000', '2021-11-23/00:00:00.000']', type(original_requested_trange[0])='<class 'str'>'
[CUBBY] [CLASS_TYPE_DEBUG] Looking up 'mag_rtn_4sa' -> 'mag_rtn_4sa' -> <class 'plotbot.data_classes.psp_mag_rtn_4sa.mag_rtn_4sa_class'>
[CUBBY_UPDATE_DEBUG A] data_type_str: 'mag_rtn_4sa', target_class_type: '<class 'plotbot.data_classes.psp_mag_rtn_4sa.mag_rtn_4sa_class'>'
[CUBBY] [INSTANCE_LOOKUP_DEBUG] Searching for instance of type <class 'plotbot.data_classes.psp_mag_rtn_4sa.mag_rtn_4sa_class'> in class_registry with 33 entries
[CUBBY] [INSTANCE_LOOKUP_DEBUG] Checking key 'psp_waves_auto' -> <class 'plotbot.data_classes.custom_classes.psp_waves_auto.psp_waves_auto_class'> vs target <class 'plotbot.data_classes.psp_mag_rtn_4sa.mag_rtn_4sa_class'>
[CUBBY] [INSTANCE_LOOKUP_DEBUG] Checking key 'demo_spectral_waves' -> <class 'plotbot.data_classes.custom_classes.demo_spectral_waves.demo_spectral_waves_class'> vs target <class 'plotbot.data_classes.psp_mag_rtn_4sa.mag_rtn_4sa_class'>
[CUBBY] [INSTANCE_LOOKUP_DEBUG] Checking key 'demo_wave_power' -> <class 'plotbot.data_classes.custom_classes.demo_wave_power.demo_wave_power_class'> vs target <class 'plotbot.data_classes.psp_mag_rtn_4sa.mag_rtn_4sa_class'>
[CUBBY] [INSTANCE_LOOKUP_DEBUG] Checking key 'psp_waves_real_test' -> <class 'plotbot.data_classes.custom_classes.psp_waves_real_test.psp_waves_real_test_class'> vs target <class 'plotbot.data_classes.psp_mag_rtn_4sa.mag_rtn_4sa_class'>
[CUBBY] [INSTANCE_LOOKUP_DEBUG] Checking key 'psp_spectral_waves' -> <class 'plotbot.data_classes.custom_classes.psp_spectral_waves.psp_spectral_waves_class'> vs target <class 'plotbot.data_classes.psp_mag_rtn_4sa.mag_rtn_4sa_class'>
[CUBBY] [INSTANCE_LOOKUP_DEBUG] Checking key 'alpha_fits' -> <class 'plotbot.data_classes.psp_alpha_fits_classes.alpha_fits_class'> vs target <class 'plotbot.data_classes.psp_mag_rtn_4sa.mag_rtn_4sa_class'>
[CUBBY] [INSTANCE_LOOKUP_DEBUG] Checking key 'mag_rtn_4sa' -> <class 'plotbot.data_classes.psp_mag_rtn_4sa.mag_rtn_4sa_class'> vs target <class 'plotbot.data_classes.psp_mag_rtn_4sa.mag_rtn_4sa_class'>
[CUBBY_UPDATE_DEBUG B] Found matching instance by type in class_registry with key: 'mag_rtn_4sa', instance ID: 14829304576
[CUBBY] [INSTANCE_LOOKUP_DEBUG] ‚úÖ MATCH FOUND by type lookup
[CUBBY] Found target global instance: mag_rtn_4sa_class (ID: 14829304576) to update for data_type 'mag_rtn_4sa'
üîç PATH ANALYSIS for 'mag_rtn_4sa' (class: mag_rtn_4sa_class)
   üìä datetime_array_exists: True, not_none: True, length: 1186504
   ‚ö° RESULT: has_existing_data = True
[CUBBY_UPDATE_DEBUG D] has_existing_data: True
   üîÄ Taking MERGE PATH for 'mag_rtn_4sa'
[CUBBY] Global instance has existing data. Attempting merge...
[CUBBY] [CLASS_TYPE_DEBUG] Looking up 'mag_rtn_4sa' -> 'mag_rtn_4sa' -> <class 'plotbot.data_classes.psp_mag_rtn_4sa.mag_rtn_4sa_class'>
[CUBBY] Processing new imported data into temporary instance...
*** MAG_CLASS_INIT (mag_rtn_4sa_class) ID:14099506736: imported_data ID: None. ***
[MAG_CLASS_DEBUG K] set_plot_config called for instance ID: 14099506736. self.datetime_array len: None_or_NoAttr
Setting up plot options for mag_rtn_4sa variables
Setting attribute: all (type=plot_manager, shape=(3,), dtype=object)
FYI: Example mag data: Created mag_rtn_4sa.all variable with 0 components
Setting attribute: br (type=plot_manager, shape=(0,), dtype=float64)
Setting attribute: bt (type=plot_manager, shape=(0,), dtype=float64)
üîß [SET_PLOT_CONFIG] Creating self.bn with raw_data['bn'] shape: None
Setting attribute: bn (type=plot_manager, shape=(0,), dtype=float64)
üîß [SET_PLOT_CONFIG] Created self.bn (ID:14844722128, class:mag_rtn_4sa.bn)
Setting attribute: bmag (type=plot_manager, shape=(0,), dtype=float64)
Setting attribute: pmag (type=plot_manager, shape=(0,), dtype=float64)
No data provided; initialized with empty attributes.
[CUBBY_UPDATE_DEBUG Merge Path - Pre-calc]: imported_data_obj ID: 13084583488, .data ID: 13043875456, .data keys: ['psp_fld_l2_mag_RTN_4_Sa_per_Cyc'] ***
[MAG_CLASS_DEBUG I] calculate_variables called for instance ID: 14099506736
*** MAG_CLASS_CALCVARS (mag_rtn_4sa_class) ID:14099506736: imported_data ID: 13084583488, .data ID: 13043875456 ***
    Available keys in imported_data.data for CALCVARS: ['psp_fld_l2_mag_RTN_4_Sa_per_Cyc']
Setting attribute: time (type=ndarray, shape=(1186519,), dtype=int64)
Setting attribute: datetime_array (type=ndarray, shape=(1186519,), dtype=datetime64[ns])
[MAG_CLASS_DEBUG J] Instance ID: 14099506736 AFTER self.datetime_array assignment in calculate_variables. Length: 1186519
[MAG_CLASS_DEBUG J] First datetime: 2021-11-20T00:00:00.148207232
[MAG_CLASS_DEBUG J] Last datetime: 2021-11-22T23:59:59.996740736
self.datetime_array type after conversion: {type(self.datetime_array)}
First element type: {type(self.datetime_array[0])}
Setting attribute: field (type=ndarray, shape=(1186519, 3), dtype=float32)
Setting attribute: raw_data with value: {'all': [array([ -56.006092,  -61.066242,  -68.98938 , ..., -168.1282  ,
       -167.77559 , -166.18...

Debug - Data Arrays:
Time array shape: (1186519,)
Field data shape: (1186519, 3)
First TT2000 time: 690638469332207232
[CUBBY] ‚úÖ New data processed.
[CUBBY_UPDATE_DEBUG M] Before _merge_arrays. Existing (ID: 14829304576) dt_len: 1186504, range: (numpy.datetime64('2020-01-28T00:00:00.074993408'), numpy.datetime64('2020-01-30T23:59:59.943748864')). New (temp) dt_len: 1186519, range: (numpy.datetime64('2021-11-20T00:00:00.148207232'), numpy.datetime64('2021-11-22T23:59:59.996740736'))
[CUBBY] Calling _merge_arrays...
[CUBBY] 
üî• ULTIMATE MERGE ENGINE ACTIVATED üî•
[CUBBY] üìä MERGE STATS:
[CUBBY]    Existing: 1,186,504 records
[CUBBY]    New: 1,186,519 records
[CUBBY]    Potential total: 2,373,023 records
[CUBBY] üöÄ NO OVERLAP - Simple concatenation
[CUBBY] üèÅ MERGE COMPLETE!
[CUBBY]    Final records: 2,373,023
[CUBBY]    Duration: 0.01s
[CUBBY]    Speed: 347,280,112 records/sec
[CUBBY]    Session total: 13,177,581 records
[CUBBY]    Session avg: 23,572,341 records/sec
[CUBBY DEBUG] Merge successful. Attempting to update global instance attributes...
Setting attribute: datetime_array (type=ndarray, shape=(2373023,), dtype=datetime64[ns])
Setting attribute: raw_data with value: {'bmag': array([116.92357, 116.72138, 116.9249 , ..., 191.31505, 191.43619,
       191.19615], dtype...
[CUBBY_UPDATE_DEBUG F] Instance (ID: 14829304576) AFTER assigning merged_times/raw_data. merged_times len: 2373023, global_instance.datetime_array len: 2373023
[CUBBY_UPDATE_DEBUG] PRE-TIME-RECONSTRUCTION:
    datetime_array len: 2373023
    current time len: 1186504
[CUBBY_UPDATE_DEBUG] Converting merged datetime_array (len 2373023) directly to int64 for .time attribute.
Setting attribute: time (type=ndarray, shape=(2373023,), dtype=int64)
[CUBBY_UPDATE_DEBUG] POST-TIME-ASSIGNMENT (direct int64 cast):
    NEW time len: 2373023, shape: (2373023,), dtype: int64
[MAG_CLASS_DEBUG K] set_plot_config called for instance ID: 14829304576. self.datetime_array len: 2373023
Setting up plot options for mag_rtn_4sa variables
Setting attribute: all (type=plot_manager, shape=(3, 2373023), dtype=float32)
FYI: Example mag data: Created mag_rtn_4sa.all variable with 3 components
Setting attribute: br (type=plot_manager, shape=(2373023,), dtype=float32)
Setting attribute: bt (type=plot_manager, shape=(2373023,), dtype=float32)
üîß [SET_PLOT_CONFIG] Creating self.bn with raw_data['bn'] shape: (2373023,)
Setting attribute: bn (type=plot_manager, shape=(2373023,), dtype=float32)
üîß [SET_PLOT_CONFIG] Created self.bn (ID:14844720080, class:mag_rtn_4sa.bn)
Setting attribute: bmag (type=plot_manager, shape=(2373023,), dtype=float32)
Setting attribute: pmag (type=plot_manager, shape=(2373023,), dtype=float32)
[CUBBY_UPDATE_DEBUG G_POST_FINAL] Instance (ID: 14829304576) AFTER ALL MERGE LOGIC (before return True). datetime_array len: 2373023, min: 2020-01-28T00:00:00.074993408, max: 2021-11-22T23:59:59.996740736
[CUBBY_UPDATE_DEBUG CHECK_REGISTRY] Instance in class_registry['mag_rtn_4sa'] (ID: 14829304576) state. dt_len: 2373023, min: 2020-01-28T00:00:00.074993408, max: 2021-11-22T23:59:59.996740736
[CUBBY_UPDATE_DEBUG] Global instance fully updated (merge complete).
‚úÖ DataCubby processed update for mag_rtn_4sa.
üîç [PLOTBOT_PLOT_PREP] plot_requests has 1 items:
  1. mag_rtn_4sa.br ‚Üí axis 1 (original ID:14758646992)

üîç [PLOTBOT_PLOT_PREP] Preparing variables for plotting...
üîç [PLOTBOT_PLOT_PREP] Processing request: mag_rtn_4sa.br
[CUBBY] 
=== Retrieving mag_rtn_4sa from data_cubby ===
[CUBBY] GRAB CALLER: /Users/robertalexander/GitHub/Plotbot/plotbot/plotbot_main.py:380
[CUBBY] GRAB SUCCESS - Retrieved mag_rtn_4sa with type <class 'plotbot.data_classes.psp_mag_rtn_4sa.mag_rtn_4sa_class'>
[CUBBY] [CUBBY_GRAB_RETURN_STATE] Object ID 14829304576 for key 'mag_rtn_4sa'. dt_len: 2373023, min: 2020-01-28T00:00:00.074993408, max: 2021-11-22T23:59:59.996740736
[CUBBY] GRAB OUTPUT - datetime_array type=ndarray, elem_type=datetime64, shape=(2373023,), range=2020-01-28T00:00:00.074993 to 2021-11-22T23:59:59.996740
[CUBBY] GRAB OUTPUT - raw_data keys=['bmag', 'pmag', 'bn', 'br', 'bt', 'all'] | bmag: type=ndarray, shape=(2373023,) | pmag: type=ndarray, shape=(2373023,) | bn: type=ndarray, shape=(2373023,) | br: type=ndarray, shape=(2373023,) | bt: type=ndarray, shape=(2373023,) | all(list): len=3, elem_shape=(2373023,)
[CUBBY] === End Retrieval Debug (LEAVING DATA CUBBY)===

üîç [PLOTBOT_PLOT_PREP] Retrieved class instance: mag_rtn_4sa_class (ID:14829304576)
üîß [GET_SUBCLASS] Attempting to get mag_rtn_4sa.br for instance ID:14829304576
[CLIP] Setting requested_trange: ['2021-11-20/00:00:00.000', '2021-11-23/00:00:00.000']
[CLIP]   Raw data size: 2373023
[CLIP]   datetime_array size: 2373023
[CLIP]   Clipped data size: 1186519
[CLIP]   Clipped datetime_array size: 1186519
üîß [GET_SUBCLASS] Found 'br' as attribute. Type:plot_manager, ID:14844720464
üîß [GET_SUBCLASS] Returning: mag_rtn_4sa.br
üîç [PLOTBOT_PLOT_PREP] Retrieved variable: mag_rtn_4sa.br (ID:14844720464), data_type: mag_RTN_4sa
Variable data_type: mag_RTN_4sa
üéØ Set requested_trange on mag_rtn_4sa.br: ['2021-11-20/00:00:00.000', '2021-11-23/00:00:00.000']
[DATA] Returning clipped data: 1186519 points
[DATA] Returning clipped data: 1186519 points
[DATA] Returning clipped data: 1186519 points
[DATA] Returning clipped data: 1186519 points
üìà Plotting mag_rtn_4sa.br
üîç Time clipping: 2021-11-20/00:00:00.000 to 2021-11-23/00:00:00.000
üîç Data time range: 2020-01-28T00:00:00.074993408 to 2021-11-22T23:59:59.996740736
Successfully compared numpy datetime64 times, found 1186519 indices.
üîç First point: 2021-11-20T00:00:00.148207232, Last point: 2021-11-22T23:59:59.996740736
[DATA] Returning clipped data: 32958 points
[DATA] Returning clipped data: 32958 points
[DATA] Returning clipped data: 32958 points
Mag First run time: 2.00s
Mag data points: 32958
Mag processing time per point: 0.0606ms/point

=== Mag Second run ===

üîç [PLOTBOT_ENTRY] plotbot() called with 2 arguments:
  [PLOTBOT_ENTRY] arg0: mag_rtn_4sa.br (ID:14758646992) ‚Üí axis 1
ü§ñ Plotbot starting (loading scientific libraries)...
ü§ñ Plotbot libraries loaded, proceeding...
üîç [PLOTBOT_BUILD_REQUESTS] Adding to plot_requests: mag_rtn_4sa.br (ID:14758646992)
üõ∞Ô∏è mag_RTN_4sa - acquiring variables: br
[CUBBY] 
=== Retrieving mag_rtn_4sa from data_cubby ===
[CUBBY] GRAB CALLER: /Users/robertalexander/GitHub/Plotbot/plotbot/plotbot_main.py:311
[CUBBY] GRAB SUCCESS - Retrieved mag_rtn_4sa with type <class 'plotbot.data_classes.psp_mag_rtn_4sa.mag_rtn_4sa_class'>
[CUBBY] [CUBBY_GRAB_RETURN_STATE] Object ID 14829304576 for key 'mag_rtn_4sa'. dt_len: 2373023, min: 2020-01-28T00:00:00.074993408, max: 2021-11-22T23:59:59.996740736
[CUBBY] GRAB OUTPUT - datetime_array type=ndarray, elem_type=datetime64, shape=(2373023,), range=2020-01-28T00:00:00.074993 to 2021-11-22T23:59:59.996740
[CUBBY] GRAB OUTPUT - raw_data keys=['bmag', 'pmag', 'bn', 'br', 'bt', 'all'] | bmag: type=ndarray, shape=(2373023,) | pmag: type=ndarray, shape=(2373023,) | bn: type=ndarray, shape=(2373023,) | br: type=ndarray, shape=(2373023,) | bt: type=ndarray, shape=(2373023,) | all(list): len=3, elem_shape=(2373023,)
[CUBBY] === End Retrieval Debug (LEAVING DATA CUBBY)===

üîß [GET_SUBCLASS] Attempting to get mag_rtn_4sa.br for instance ID:14829304576
üîß [GET_SUBCLASS] Found 'br' as attribute. Type:plot_manager, ID:14844720464
üîß [GET_SUBCLASS] Returning: mag_rtn_4sa.br
Added variable: mag_rtn_4sa.br (ID:14844720464)
Total variables to load: 1
 
mag_RTN_4sa already calculated for the time range: 2021-11-20/00:00:00.000 to 2021-11-23/00:00:00.000
‚úÖ All data already cached for 1 variables
üïí TimeRangeTracker: Stored trange ['2021-11-20/00:00:00.000', '2021-11-23/00:00:00.000']
üîç [PLOTBOT_PLOT_PREP] plot_requests has 1 items:
  1. mag_rtn_4sa.br ‚Üí axis 1 (original ID:14758646992)

üîç [PLOTBOT_PLOT_PREP] Preparing variables for plotting...
üîç [PLOTBOT_PLOT_PREP] Processing request: mag_rtn_4sa.br
[CUBBY] 
=== Retrieving mag_rtn_4sa from data_cubby ===
[CUBBY] GRAB CALLER: /Users/robertalexander/GitHub/Plotbot/plotbot/plotbot_main.py:380
[CUBBY] GRAB SUCCESS - Retrieved mag_rtn_4sa with type <class 'plotbot.data_classes.psp_mag_rtn_4sa.mag_rtn_4sa_class'>
[CUBBY] [CUBBY_GRAB_RETURN_STATE] Object ID 14829304576 for key 'mag_rtn_4sa'. dt_len: 2373023, min: 2020-01-28T00:00:00.074993408, max: 2021-11-22T23:59:59.996740736
[CUBBY] GRAB OUTPUT - datetime_array type=ndarray, elem_type=datetime64, shape=(2373023,), range=2020-01-28T00:00:00.074993 to 2021-11-22T23:59:59.996740
[CUBBY] GRAB OUTPUT - raw_data keys=['bmag', 'pmag', 'bn', 'br', 'bt', 'all'] | bmag: type=ndarray, shape=(2373023,) | pmag: type=ndarray, shape=(2373023,) | bn: type=ndarray, shape=(2373023,) | br: type=ndarray, shape=(2373023,) | bt: type=ndarray, shape=(2373023,) | all(list): len=3, elem_shape=(2373023,)
[CUBBY] === End Retrieval Debug (LEAVING DATA CUBBY)===

üîç [PLOTBOT_PLOT_PREP] Retrieved class instance: mag_rtn_4sa_class (ID:14829304576)
üîß [GET_SUBCLASS] Attempting to get mag_rtn_4sa.br for instance ID:14829304576
üîß [GET_SUBCLASS] Found 'br' as attribute. Type:plot_manager, ID:14844720464
üîß [GET_SUBCLASS] Returning: mag_rtn_4sa.br
üîç [PLOTBOT_PLOT_PREP] Retrieved variable: mag_rtn_4sa.br (ID:14844720464), data_type: mag_RTN_4sa
Variable data_type: mag_RTN_4sa
üéØ Set requested_trange on mag_rtn_4sa.br: ['2021-11-20/00:00:00.000', '2021-11-23/00:00:00.000']
[DATA] Returning clipped data: 1186519 points
[DATA] Returning clipped data: 1186519 points
[DATA] Returning clipped data: 1186519 points
[DATA] Returning clipped data: 1186519 points
üìà Plotting mag_rtn_4sa.br
üîç Time clipping: 2021-11-20/00:00:00.000 to 2021-11-23/00:00:00.000
üîç Data time range: 2020-01-28T00:00:00.074993408 to 2021-11-22T23:59:59.996740736
Successfully compared numpy datetime64 times, found 1186519 indices.
üîç First point: 2021-11-20T00:00:00.148207232, Last point: 2021-11-22T23:59:59.996740736
[DATA] Returning clipped data: 32958 points
[DATA] Returning clipped data: 32958 points
[DATA] Returning clipped data: 32958 points
Mag Second run time: 0.59s
Mag data points: 32958
Mag processing time per point: 0.0179ms/point
Mag Speedup: 3.4x faster
Mag Performance Ratio (2nd/1st): 0.295
--- End Baseline Test ---


--- Testing psp_orbit caching performance ---
=== Orbit First run ===

üîç [PLOTBOT_ENTRY] plotbot() called with 2 arguments:
  [PLOTBOT_ENTRY] arg0: psp_orbit.orbital_speed (ID:6119153744) ‚Üí axis 1
ü§ñ Plotbot starting (loading scientific libraries)...
ü§ñ Plotbot libraries loaded, proceeding...
üîç [PLOTBOT_BUILD_REQUESTS] Adding to plot_requests: psp_orbit.orbital_speed (ID:6119153744)
üõ∞Ô∏è psp_orbit_data - acquiring variables: orbital_speed
[CUBBY] 
=== Retrieving psp_orbit from data_cubby ===
[CUBBY] GRAB CALLER: /Users/robertalexander/GitHub/Plotbot/plotbot/plotbot_main.py:311
[CUBBY] GRAB SUCCESS - Retrieved psp_orbit with type <class 'plotbot.data_classes.psp_orbit.psp_orbit_class'>
[CUBBY] [CUBBY_GRAB_RETURN_STATE] Object ID 14829218384 for key 'psp_orbit'. dt_len: None_or_NoAttr, min: N/A, max: N/A
[CUBBY] GRAB OUTPUT - No datetime_array attribute found
[CUBBY] GRAB OUTPUT - raw_data keys=['r_sun', 'carrington_lon', 'carrington_lat', 'icrf_x', 'icrf_y', 'icrf_z', 'heliocentric_distance_au', 'orbital_speed', 'angular_momentum', 'velocity_x', 'velocity_y', 'velocity_z'] | r_sun: type=NoneType, shape=N/A | carrington_lon: type=NoneType, shape=N/A | carrington_lat: type=NoneType, shape=N/A | icrf_x: type=NoneType, shape=N/A | icrf_y: type=NoneType, shape=N/A | icrf_z: type=NoneType, shape=N/A | heliocentric_distance_au: type=NoneType, shape=N/A | orbital_speed: type=NoneType, shape=N/A | angular_momentum: type=NoneType, shape=N/A | velocity_x: type=NoneType, shape=N/A | velocity_y: type=NoneType, shape=N/A | velocity_z: type=NoneType, shape=N/A
[CUBBY] === End Retrieval Debug (LEAVING DATA CUBBY)===

Getting subclass: orbital_speed
Returning orbital_speed component
Added variable: psp_orbit.orbital_speed (ID:14101926352)
Total variables to load: 1
 
üì• Acquiring data for 1 variables...
üïí TimeRangeTracker: Stored trange ['2021-11-20/00:00:00.000', '2021-11-23/00:00:00.000']
[GET_DATA_ENTRY] Original trange: ['2021-11-20/00:00:00.000', '2021-11-23/00:00:00.000'], variables: ['[]']
[GET_DATA_ENTRY] Instance psp_orbit_data (ID: 14101926352) passed in. Len: None, Min: N/A, Max: N/A
[GET_DATA PRE-LOOP] required_data_types set: {'psp_orbit_data'}
üõ∞Ô∏è psp_orbit_data - acquiring variables: orbital_speed
üìã Required data types: {'psp_orbit_data'}
[GET_DATA IN-LOOP] Current data_type from set: 'psp_orbit_data' (Type: <class 'str'>)
Processing Data Type: psp_orbit_data...
üîÑ Processing: psp_orbit_data
[GET_DATA_CONFIG_CHECK] Attempting to get config for data_type FROM LOOP VAR: 'psp_orbit_data'
[GET_DATA_CONFIG_CHECK] Available keys in psp_data_types: ['mag_RTN', 'mag_RTN_4sa', 'mag_SC', 'mag_SC_4sa', 'sqtn_rfs_v1v2', 'spe_sf0_pad', 'spe_af0_pad', 'spi_sf00_l3_mom', 'spi_sf00_8dx32ex8a', 'spi_af00_L3_mom', 'spi_sf0a_l3_mom', 'dfb_ac_spec_dv12hg', 'dfb_ac_spec_dv34hg', 'dfb_dc_spec_dv12hg', 'sf00_fits', 'sf01_fits', 'ham', 'psp_br_norm_calculated', 'psp_orbit_data', 'psp_span_vdf', 'wind_mfi_h2', 'wind_swe_h1', 'wind_swe_h5', 'wind_3dp_pm', 'wind_3dp_elpd', 'psp_waves_auto', 'demo_spectral_waves', 'demo_wave_power', 'psp_waves_real_test', 'psp_simple_test', 'psp_spectral_waves', 'psp_waves_test', 'psp_wavepower']
[CUBBY] 
=== Retrieving psp_orbit from data_cubby ===
[CUBBY] GRAB CALLER: /Users/robertalexander/GitHub/Plotbot/plotbot/get_data.py:425
[CUBBY] GRAB SUCCESS - Retrieved psp_orbit with type <class 'plotbot.data_classes.psp_orbit.psp_orbit_class'>
[CUBBY] [CUBBY_GRAB_RETURN_STATE] Object ID 14829218384 for key 'psp_orbit'. dt_len: None_or_NoAttr, min: N/A, max: N/A
[CUBBY] GRAB OUTPUT - No datetime_array attribute found
[CUBBY] GRAB OUTPUT - raw_data keys=['r_sun', 'carrington_lon', 'carrington_lat', 'icrf_x', 'icrf_y', 'icrf_z', 'heliocentric_distance_au', 'orbital_speed', 'angular_momentum', 'velocity_x', 'velocity_y', 'velocity_z'] | r_sun: type=NoneType, shape=N/A | carrington_lon: type=NoneType, shape=N/A | carrington_lat: type=NoneType, shape=N/A | icrf_x: type=NoneType, shape=N/A | icrf_y: type=NoneType, shape=N/A | icrf_z: type=NoneType, shape=N/A | heliocentric_distance_au: type=NoneType, shape=N/A | orbital_speed: type=NoneType, shape=N/A | angular_momentum: type=NoneType, shape=N/A | velocity_x: type=NoneType, shape=N/A | velocity_y: type=NoneType, shape=N/A | velocity_z: type=NoneType, shape=N/A
[CUBBY] === End Retrieval Debug (LEAVING DATA CUBBY)===

Tracker indicates calculation needed for psp_orbit_data (local support data). Skipping download, proceeding to import_data_function.
psp_orbit_data - Import/Refresh required
‚úÖ - Local support data import complete for psp_orbit_data.

üì• Requesting DataCubby to update/merge global instance for psp_orbit...
[GET_DATA PRE-CUBBY CALL] Passing to DataCubby: cubby_key='psp_orbit', original_requested_trange='['2021-11-20/00:00:00.000', '2021-11-23/00:00:00.000']', type(original_requested_trange[0])='<class 'str'>'
[CUBBY_UPDATE_ENTRY] Received call for 'psp_orbit'. Original trange: '['2021-11-20/00:00:00.000', '2021-11-23/00:00:00.000']', type(original_requested_trange[0])='<class 'str'>'
[CUBBY] [CLASS_TYPE_DEBUG] Looking up 'psp_orbit' -> 'psp_orbit' -> <class 'plotbot.data_classes.psp_orbit.psp_orbit_class'>
[CUBBY_UPDATE_DEBUG A] data_type_str: 'psp_orbit', target_class_type: '<class 'plotbot.data_classes.psp_orbit.psp_orbit_class'>'
[CUBBY] [INSTANCE_LOOKUP_DEBUG] Searching for instance of type <class 'plotbot.data_classes.psp_orbit.psp_orbit_class'> in class_registry with 33 entries
[CUBBY] [INSTANCE_LOOKUP_DEBUG] Checking key 'psp_waves_auto' -> <class 'plotbot.data_classes.custom_classes.psp_waves_auto.psp_waves_auto_class'> vs target <class 'plotbot.data_classes.psp_orbit.psp_orbit_class'>
[CUBBY] [INSTANCE_LOOKUP_DEBUG] Checking key 'demo_spectral_waves' -> <class 'plotbot.data_classes.custom_classes.demo_spectral_waves.demo_spectral_waves_class'> vs target <class 'plotbot.data_classes.psp_orbit.psp_orbit_class'>
[CUBBY] [INSTANCE_LOOKUP_DEBUG] Checking key 'demo_wave_power' -> <class 'plotbot.data_classes.custom_classes.demo_wave_power.demo_wave_power_class'> vs target <class 'plotbot.data_classes.psp_orbit.psp_orbit_class'>
[CUBBY] [INSTANCE_LOOKUP_DEBUG] Checking key 'psp_waves_real_test' -> <class 'plotbot.data_classes.custom_classes.psp_waves_real_test.psp_waves_real_test_class'> vs target <class 'plotbot.data_classes.psp_orbit.psp_orbit_class'>
[CUBBY] [INSTANCE_LOOKUP_DEBUG] Checking key 'psp_spectral_waves' -> <class 'plotbot.data_classes.custom_classes.psp_spectral_waves.psp_spectral_waves_class'> vs target <class 'plotbot.data_classes.psp_orbit.psp_orbit_class'>
[CUBBY] [INSTANCE_LOOKUP_DEBUG] Checking key 'alpha_fits' -> <class 'plotbot.data_classes.psp_alpha_fits_classes.alpha_fits_class'> vs target <class 'plotbot.data_classes.psp_orbit.psp_orbit_class'>
[CUBBY] [INSTANCE_LOOKUP_DEBUG] Checking key 'mag_rtn_4sa' -> <class 'plotbot.data_classes.psp_mag_rtn_4sa.mag_rtn_4sa_class'> vs target <class 'plotbot.data_classes.psp_orbit.psp_orbit_class'>
[CUBBY] [INSTANCE_LOOKUP_DEBUG] Checking key 'mag_rtn' -> <class 'plotbot.data_classes.psp_mag_rtn.mag_rtn_class'> vs target <class 'plotbot.data_classes.psp_orbit.psp_orbit_class'>
[CUBBY] [INSTANCE_LOOKUP_DEBUG] Checking key 'mag_sc_4sa' -> <class 'plotbot.data_classes.psp_mag_sc_4sa.mag_sc_4sa_class'> vs target <class 'plotbot.data_classes.psp_orbit.psp_orbit_class'>
[CUBBY] [INSTANCE_LOOKUP_DEBUG] Checking key 'mag_sc' -> <class 'plotbot.data_classes.psp_mag_sc.mag_sc_class'> vs target <class 'plotbot.data_classes.psp_orbit.psp_orbit_class'>
[CUBBY] [INSTANCE_LOOKUP_DEBUG] Checking key 'epad' -> <class 'plotbot.data_classes.psp_electron_classes.epad_strahl_class'> vs target <class 'plotbot.data_classes.psp_orbit.psp_orbit_class'>
[CUBBY] [INSTANCE_LOOKUP_DEBUG] Checking key 'epad_hr' -> <class 'plotbot.data_classes.psp_electron_classes.epad_strahl_high_res_class'> vs target <class 'plotbot.data_classes.psp_orbit.psp_orbit_class'>
[CUBBY] [INSTANCE_LOOKUP_DEBUG] Checking key 'proton' -> <class 'plotbot.data_classes.psp_proton.proton_class'> vs target <class 'plotbot.data_classes.psp_orbit.psp_orbit_class'>
[CUBBY] [INSTANCE_LOOKUP_DEBUG] Checking key 'proton_hr' -> <class 'plotbot.data_classes.psp_proton_hr.proton_hr_class'> vs target <class 'plotbot.data_classes.psp_orbit.psp_orbit_class'>
[CUBBY] [INSTANCE_LOOKUP_DEBUG] Checking key 'proton_fits' -> <class 'plotbot.data_classes.psp_proton_fits_classes.proton_fits_class'> vs target <class 'plotbot.data_classes.psp_orbit.psp_orbit_class'>
[CUBBY] [INSTANCE_LOOKUP_DEBUG] Checking key 'ham' -> <class 'plotbot.data_classes.psp_ham_classes.ham_class'> vs target <class 'plotbot.data_classes.psp_orbit.psp_orbit_class'>
[CUBBY] [INSTANCE_LOOKUP_DEBUG] Checking key 'wind_mfi_h2' -> <class 'plotbot.data_classes.wind_mfi_classes.wind_mfi_h2_class'> vs target <class 'plotbot.data_classes.psp_orbit.psp_orbit_class'>
[CUBBY] [INSTANCE_LOOKUP_DEBUG] Checking key 'wind_3dp_elpd' -> <class 'plotbot.data_classes.wind_3dp_classes.wind_3dp_elpd_class'> vs target <class 'plotbot.data_classes.psp_orbit.psp_orbit_class'>
[CUBBY] [INSTANCE_LOOKUP_DEBUG] Checking key 'wind_3dp_pm' -> <class 'plotbot.data_classes.wind_3dp_pm_classes.wind_3dp_pm_class'> vs target <class 'plotbot.data_classes.psp_orbit.psp_orbit_class'>
[CUBBY] [INSTANCE_LOOKUP_DEBUG] Checking key 'psp_alpha' -> <class 'plotbot.data_classes.psp_alpha_classes.psp_alpha_class'> vs target <class 'plotbot.data_classes.psp_orbit.psp_orbit_class'>
[CUBBY] [INSTANCE_LOOKUP_DEBUG] Checking key 'wind_swe_h5' -> <class 'plotbot.data_classes.wind_swe_h5_classes.wind_swe_h5_class'> vs target <class 'plotbot.data_classes.psp_orbit.psp_orbit_class'>
[CUBBY] [INSTANCE_LOOKUP_DEBUG] Checking key 'wind_swe_h1' -> <class 'plotbot.data_classes.wind_swe_h1_classes.wind_swe_h1_class'> vs target <class 'plotbot.data_classes.psp_orbit.psp_orbit_class'>
[CUBBY] [INSTANCE_LOOKUP_DEBUG] Checking key 'psp_span_vdf' -> <class 'plotbot.data_classes.psp_span_vdf.psp_span_vdf_class'> vs target <class 'plotbot.data_classes.psp_orbit.psp_orbit_class'>
[CUBBY] [INSTANCE_LOOKUP_DEBUG] Checking key 'psp_qtn' -> <class 'plotbot.data_classes.psp_qtn_classes.psp_qtn_class'> vs target <class 'plotbot.data_classes.psp_orbit.psp_orbit_class'>
[CUBBY] [INSTANCE_LOOKUP_DEBUG] Checking key 'psp_dfb' -> <class 'plotbot.data_classes.psp_dfb_classes.psp_dfb_class'> vs target <class 'plotbot.data_classes.psp_orbit.psp_orbit_class'>
[CUBBY] [INSTANCE_LOOKUP_DEBUG] Checking key 'psp_orbit' -> <class 'plotbot.data_classes.psp_orbit.psp_orbit_class'> vs target <class 'plotbot.data_classes.psp_orbit.psp_orbit_class'>
[CUBBY_UPDATE_DEBUG B] Found matching instance by type in class_registry with key: 'psp_orbit', instance ID: 14829218384
[CUBBY] [INSTANCE_LOOKUP_DEBUG] ‚úÖ MATCH FOUND by type lookup
[CUBBY] Found target global instance: psp_orbit_class (ID: 14829218384) to update for data_type 'psp_orbit'
üîç PATH ANALYSIS for 'psp_orbit' (class: psp_orbit_class)
   üìä datetime_array_exists: True, not_none: False, length: 0
   ‚ö° RESULT: has_existing_data = False
[CUBBY_UPDATE_DEBUG D] has_existing_data: False
   üîÑ Taking UPDATE PATH for 'psp_orbit'
[CUBBY] Global instance for psp_orbit is empty. Populating with new data via update()...
[CUBBY_UPDATE_DEBUG H1] Instance (ID: 14829218384) BEFORE global_instance.update(). datetime_array len: None_or_NoAttr
[CUBBY] Calling update() on global instance of psp_orbit (ID: 14829218384). is_segment_merge=False
[PSP_ORBIT_CLASS_UPDATE] Stored _current_operation_trange: ['2021-11-20/00:00:00.000', '2021-11-23/00:00:00.000']
[CUBBY] 
=== PSP Orbit Update Debug ===
[CUBBY] Starting psp_orbit_class update...
[CUBBY] Stored r_sun state: {}
[CUBBY] Stored carrington_lon state: {}
[CUBBY] Stored carrington_lat state: {}
[CUBBY] Stored heliocentric_distance_au state: {}
[CUBBY] Stored orbital_speed state: {}
[CUBBY] Stored icrf_x state: {}
[CUBBY] Stored icrf_y state: {}
[CUBBY] Stored icrf_z state: {}
[CUBBY] Stored angular_momentum state: {}
[CUBBY] Stored velocity_x state: {}
[CUBBY] Stored velocity_y state: {}
[CUBBY] Stored velocity_z state: {}
Sliced psp_orbit data to 73 points for trange: ['2021-11-20/00:00:00.000', '2021-11-23/00:00:00.000']
Setting attribute: datetime_array (type=ndarray, shape=(73,), dtype=datetime64[ns])
Using ICRF coordinates for orbital mechanics calculation (inertial frame)
Orbital mechanics calculation complete (OPTIMIZED):
  Valid data points: 73/73
  Speed range: 116.11 to 163.03 km/s
  Angular momentum range: 1605211079.26 to 1729494615.22 km¬≤/s
Setting attribute: raw_data with value: {'r_sun': array([21.84972579, 21.46705687, 21.08598838, 20.70681635, 20.32986511,
       19.95548971...

Debug - PSP Orbital Data Arrays:
Time array shape: (73,)
Time range: 2021-11-20T00:00:00.000000000 to 2021-11-23T00:00:00.000000000
r_sun range: 13.28 to 24.61 R_sun
Carrington lon range: 0.32 to 358.59 deg
Carrington lat range: -3.86 to 0.75 deg
ICRF X range: -17.34 to 7.74 R_sun
ICRF Y range: -18.17 to 18.85 R_sun
ICRF Z range: -7.28 to 7.91 R_sun
Setting attribute: r_sun (type=plot_manager, shape=(73,), dtype=float64)
Setting attribute: carrington_lon (type=plot_manager, shape=(73,), dtype=float64)
Setting attribute: carrington_lat (type=plot_manager, shape=(73,), dtype=float64)
Setting attribute: heliocentric_distance_au (type=plot_manager, shape=(73,), dtype=float64)
Setting attribute: orbital_speed (type=plot_manager, shape=(73,), dtype=float64)
Setting attribute: icrf_x (type=plot_manager, shape=(73,), dtype=float64)
Setting attribute: icrf_y (type=plot_manager, shape=(73,), dtype=float64)
Setting attribute: icrf_z (type=plot_manager, shape=(73,), dtype=float64)
Setting attribute: angular_momentum (type=plot_manager, shape=(73,), dtype=float64)
Setting attribute: velocity_x (type=plot_manager, shape=(73,), dtype=float64)
Setting attribute: velocity_y (type=plot_manager, shape=(73,), dtype=float64)
Setting attribute: velocity_z (type=plot_manager, shape=(73,), dtype=float64)
[CUBBY] Restoring saved state...
[CUBBY] Restored r_sun state: {}
[CUBBY] Restored carrington_lon state: {}
[CUBBY] Restored carrington_lat state: {}
[CUBBY] Restored heliocentric_distance_au state: {}
[CUBBY] Restored orbital_speed state: {}
[CUBBY] Restored icrf_x state: {}
[CUBBY] Restored icrf_y state: {}
[CUBBY] Restored icrf_z state: {}
[CUBBY] Restored angular_momentum state: {}
[CUBBY] Restored velocity_x state: {}
[CUBBY] Restored velocity_y state: {}
[CUBBY] Restored velocity_z state: {}
[CUBBY] === End PSP Orbit Update Debug ===

[CUBBY] Successfully called update() with original_requested_trange on global instance of psp_orbit
[CUBBY_UPDATE_DEBUG H2] Instance (ID: 14829218384) AFTER global_instance.update(). datetime_array len: 73
[CUBBY] ‚úÖ Instance updated successfully via .update() method.
[CUBBY] === End Global Instance Update ===

‚úÖ DataCubby processed update for psp_orbit.
üîç [PLOTBOT_PLOT_PREP] plot_requests has 1 items:
  1. psp_orbit.orbital_speed ‚Üí axis 1 (original ID:6119153744)

üîç [PLOTBOT_PLOT_PREP] Preparing variables for plotting...
üîç [PLOTBOT_PLOT_PREP] Processing request: psp_orbit.orbital_speed
[CUBBY] 
=== Retrieving psp_orbit from data_cubby ===
[CUBBY] GRAB CALLER: /Users/robertalexander/GitHub/Plotbot/plotbot/plotbot_main.py:380
[CUBBY] GRAB SUCCESS - Retrieved psp_orbit with type <class 'plotbot.data_classes.psp_orbit.psp_orbit_class'>
[CUBBY] [CUBBY_GRAB_RETURN_STATE] Object ID 14829218384 for key 'psp_orbit'. dt_len: 73, min: 2021-11-20T00:00:00.000000000, max: 2021-11-23T00:00:00.000000000
[CUBBY] GRAB OUTPUT - datetime_array type=ndarray, elem_type=datetime64, shape=(73,), range=2021-11-20T00:00:00 to 2021-11-23T00:00:00
[CUBBY] GRAB OUTPUT - raw_data keys=['r_sun', 'carrington_lon', 'carrington_lat', 'icrf_x', 'icrf_y', 'icrf_z', 'heliocentric_distance_au', 'orbital_speed', 'angular_momentum', 'velocity_x', 'velocity_y', 'velocity_z'] | r_sun: type=ndarray, shape=(73,) | carrington_lon: type=ndarray, shape=(73,) | carrington_lat: type=ndarray, shape=(73,) | icrf_x: type=ndarray, shape=(73,) | icrf_y: type=ndarray, shape=(73,) | icrf_z: type=ndarray, shape=(73,) | heliocentric_distance_au: type=ndarray, shape=(73,) | orbital_speed: type=ndarray, shape=(73,) | angular_momentum: type=ndarray, shape=(73,) | velocity_x: type=ndarray, shape=(73,) | velocity_y: type=ndarray, shape=(73,) | velocity_z: type=ndarray, shape=(73,)
[CUBBY] === End Retrieval Debug (LEAVING DATA CUBBY)===

üîç [PLOTBOT_PLOT_PREP] Retrieved class instance: psp_orbit_class (ID:14829218384)
Getting subclass: orbital_speed
Returning orbital_speed component
üîç [PLOTBOT_PLOT_PREP] Retrieved variable: psp_orbit.orbital_speed (ID:14101926224), data_type: psp_orbit_data
Variable data_type: psp_orbit_data
[CLIP] Setting requested_trange: ['2021-11-20/00:00:00.000', '2021-11-23/00:00:00.000']
[CLIP]   Raw data size: 73
[CLIP]   datetime_array size: 73
[CLIP]   Clipped data size: 73
[CLIP]   Clipped datetime_array size: 73
üéØ Set requested_trange on psp_orbit.orbital_speed: ['2021-11-20/00:00:00.000', '2021-11-23/00:00:00.000']
[DATA] Returning clipped data: 73 points
[DATA] Returning clipped data: 73 points
[DATA] Returning clipped data: 73 points
[DATA] Returning clipped data: 73 points
üìà Plotting psp_orbit.orbital_speed
üîç Time clipping: 2021-11-20/00:00:00.000 to 2021-11-23/00:00:00.000
üîç Data time range: 2021-11-20T00:00:00.000000000 to 2021-11-23T00:00:00.000000000
Successfully compared numpy datetime64 times, found 73 indices.
üîç First point: 2021-11-20T00:00:00.000000000, Last point: 2021-11-23T00:00:00.000000000
[DATA] No clipped data, returning full array: 0 points
[DATA] No clipped data, returning full array: 0 points
[DATA] No clipped data, returning full array: 0 points
Orbit First run time: 0.45s
Orbit data points: 0
N/A

=== Orbit Second run ===

üîç [PLOTBOT_ENTRY] plotbot() called with 2 arguments:
  [PLOTBOT_ENTRY] arg0: psp_orbit.orbital_speed (ID:6119153744) ‚Üí axis 1
ü§ñ Plotbot starting (loading scientific libraries)...
ü§ñ Plotbot libraries loaded, proceeding...
üîç [PLOTBOT_BUILD_REQUESTS] Adding to plot_requests: psp_orbit.orbital_speed (ID:6119153744)
üõ∞Ô∏è psp_orbit_data - acquiring variables: orbital_speed
[CUBBY] 
=== Retrieving psp_orbit from data_cubby ===
[CUBBY] GRAB CALLER: /Users/robertalexander/GitHub/Plotbot/plotbot/plotbot_main.py:311
[CUBBY] GRAB SUCCESS - Retrieved psp_orbit with type <class 'plotbot.data_classes.psp_orbit.psp_orbit_class'>
[CUBBY] [CUBBY_GRAB_RETURN_STATE] Object ID 14829218384 for key 'psp_orbit'. dt_len: 73, min: 2021-11-20T00:00:00.000000000, max: 2021-11-23T00:00:00.000000000
[CUBBY] GRAB OUTPUT - datetime_array type=ndarray, elem_type=datetime64, shape=(73,), range=2021-11-20T00:00:00 to 2021-11-23T00:00:00
[CUBBY] GRAB OUTPUT - raw_data keys=['r_sun', 'carrington_lon', 'carrington_lat', 'icrf_x', 'icrf_y', 'icrf_z', 'heliocentric_distance_au', 'orbital_speed', 'angular_momentum', 'velocity_x', 'velocity_y', 'velocity_z'] | r_sun: type=ndarray, shape=(73,) | carrington_lon: type=ndarray, shape=(73,) | carrington_lat: type=ndarray, shape=(73,) | icrf_x: type=ndarray, shape=(73,) | icrf_y: type=ndarray, shape=(73,) | icrf_z: type=ndarray, shape=(73,) | heliocentric_distance_au: type=ndarray, shape=(73,) | orbital_speed: type=ndarray, shape=(73,) | angular_momentum: type=ndarray, shape=(73,) | velocity_x: type=ndarray, shape=(73,) | velocity_y: type=ndarray, shape=(73,) | velocity_z: type=ndarray, shape=(73,)
[CUBBY] === End Retrieval Debug (LEAVING DATA CUBBY)===

Getting subclass: orbital_speed
Returning orbital_speed component
Added variable: psp_orbit.orbital_speed (ID:14101926224)
Total variables to load: 1
 
psp_orbit_data already calculated for the time range: 2021-11-20/00:00:00.000 to 2021-11-23/00:00:00.000
‚úÖ All data already cached for 1 variables
üïí TimeRangeTracker: Stored trange ['2021-11-20/00:00:00.000', '2021-11-23/00:00:00.000']
üîç [PLOTBOT_PLOT_PREP] plot_requests has 1 items:
  1. psp_orbit.orbital_speed ‚Üí axis 1 (original ID:6119153744)

üîç [PLOTBOT_PLOT_PREP] Preparing variables for plotting...
üîç [PLOTBOT_PLOT_PREP] Processing request: psp_orbit.orbital_speed
[CUBBY] 
=== Retrieving psp_orbit from data_cubby ===
[CUBBY] GRAB CALLER: /Users/robertalexander/GitHub/Plotbot/plotbot/plotbot_main.py:380
[CUBBY] GRAB SUCCESS - Retrieved psp_orbit with type <class 'plotbot.data_classes.psp_orbit.psp_orbit_class'>
[CUBBY] [CUBBY_GRAB_RETURN_STATE] Object ID 14829218384 for key 'psp_orbit'. dt_len: 73, min: 2021-11-20T00:00:00.000000000, max: 2021-11-23T00:00:00.000000000
[CUBBY] GRAB OUTPUT - datetime_array type=ndarray, elem_type=datetime64, shape=(73,), range=2021-11-20T00:00:00 to 2021-11-23T00:00:00
[CUBBY] GRAB OUTPUT - raw_data keys=['r_sun', 'carrington_lon', 'carrington_lat', 'icrf_x', 'icrf_y', 'icrf_z', 'heliocentric_distance_au', 'orbital_speed', 'angular_momentum', 'velocity_x', 'velocity_y', 'velocity_z'] | r_sun: type=ndarray, shape=(73,) | carrington_lon: type=ndarray, shape=(73,) | carrington_lat: type=ndarray, shape=(73,) | icrf_x: type=ndarray, shape=(73,) | icrf_y: type=ndarray, shape=(73,) | icrf_z: type=ndarray, shape=(73,) | heliocentric_distance_au: type=ndarray, shape=(73,) | orbital_speed: type=ndarray, shape=(73,) | angular_momentum: type=ndarray, shape=(73,) | velocity_x: type=ndarray, shape=(73,) | velocity_y: type=ndarray, shape=(73,) | velocity_z: type=ndarray, shape=(73,)
[CUBBY] === End Retrieval Debug (LEAVING DATA CUBBY)===

üîç [PLOTBOT_PLOT_PREP] Retrieved class instance: psp_orbit_class (ID:14829218384)
Getting subclass: orbital_speed
Returning orbital_speed component
üîç [PLOTBOT_PLOT_PREP] Retrieved variable: psp_orbit.orbital_speed (ID:14101926224), data_type: psp_orbit_data
Variable data_type: psp_orbit_data
üéØ Set requested_trange on psp_orbit.orbital_speed: ['2021-11-20/00:00:00.000', '2021-11-23/00:00:00.000']
[DATA] Returning clipped data: 73 points
[DATA] Returning clipped data: 73 points
[DATA] Returning clipped data: 73 points
[DATA] Returning clipped data: 73 points
üìà Plotting psp_orbit.orbital_speed
üîç Time clipping: 2021-11-20/00:00:00.000 to 2021-11-23/00:00:00.000
üîç Data time range: 2021-11-20T00:00:00.000000000 to 2021-11-23T00:00:00.000000000
Successfully compared numpy datetime64 times, found 73 indices.
üîç First point: 2021-11-20T00:00:00.000000000, Last point: 2021-11-23T00:00:00.000000000
[DATA] No clipped data, returning full array: 0 points
[DATA] No clipped data, returning full array: 0 points
[DATA] No clipped data, returning full array: 0 points
Orbit Second run time: 0.38s
Orbit data points: 0
N/A

Orbit Speedup: 1.2x faster
Orbit Performance Ratio (2nd/1st): 0.843
Orbit Cache working (>10x): NO

--- DETAILED ORBIT BREAKDOWN TEST ---
Testing just the orbital mechanics calculation on 73 points...
Setting attribute: r_sun (type=plot_manager, shape=(0,), dtype=float64)
Setting attribute: carrington_lon (type=plot_manager, shape=(0,), dtype=float64)
Setting attribute: carrington_lat (type=plot_manager, shape=(0,), dtype=float64)
Setting attribute: heliocentric_distance_au (type=plot_manager, shape=(0,), dtype=float64)
Setting attribute: orbital_speed (type=plot_manager, shape=(0,), dtype=float64)
Setting attribute: icrf_x (type=plot_manager, shape=(0,), dtype=float64)
Setting attribute: icrf_y (type=plot_manager, shape=(0,), dtype=float64)
Setting attribute: icrf_z (type=plot_manager, shape=(0,), dtype=float64)
Setting attribute: angular_momentum (type=plot_manager, shape=(0,), dtype=float64)
Setting attribute: velocity_x (type=plot_manager, shape=(0,), dtype=float64)
Setting attribute: velocity_y (type=plot_manager, shape=(0,), dtype=float64)
Setting attribute: velocity_z (type=plot_manager, shape=(0,), dtype=float64)
No data provided; initialized with empty attributes.
Orbital mechanics calculation complete (OPTIMIZED):
  Valid data points: 73/73
  Speed range: 229.42 to 229.42 km/s
  Angular momentum range: 0.00 to 0.00 km¬≤/s
Pure calculation time for 73 points: 0.63ms
Pure calculation per point: 0.0086ms/point

--- PERFORMANCE PER POINT COMPARISON ---
Cannot calculate per-point comparison - missing data lengths


================================================================================
üéØ GENERATING COMPREHENSIVE TIMING ANALYSIS
================================================================================
No timing data available in timing_tracker
